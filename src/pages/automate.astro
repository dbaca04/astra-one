---
import ContentPage from "../layouts/ContentPage.astro";
import { getCollection } from "astro:content";
import FormattedDate from "../components/FormattedDate.astro";
import type { CollectionEntry } from "astro:content";
import type { BlogSchema } from "../types";

// Get blog entries for the "automate" section
const allPosts = await getCollection("blog");
// Type assertion for the schema
interface BlogPost extends CollectionEntry<"blog"> {
    data: BlogSchema;
    slug: string;
}
// Filter by section and cast
const automatePosts = allPosts
    .filter((post) => {
        const data = post.data as BlogSchema;
        return data.section === "automate";
    })
    .sort(
        (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
    ) as BlogPost[];
---

<ContentPage
    title="Automate"
    description="Discover automation solutions to streamline your workflow and increase productivity."
>
    <h2>Automation Solutions</h2>

    <p>
        Automation allows you to work smarter, not harder. In this section, we
        explore tools, techniques, and best practices to automate repetitive
        tasks, workflows, and processes in your projects.
    </p>

    <p>
        Whether you're a developer looking to streamline your workflow, a
        content creator seeking to optimize your publication process, or a
        professional wanting to increase productivity, you'll find valuable
        automation resources here.
    </p>

    <div class="automation-types">
        <div class="automation-type">
            <h3>Development Automation</h3>
            <ul>
                <li>CI/CD pipelines</li>
                <li>Code generation tools</li>
                <li>Testing automation</li>
                <li>GitHub Actions workflows</li>
            </ul>
        </div>

        <div class="automation-type">
            <h3>Content Automation</h3>
            <ul>
                <li>Scheduled publishing</li>
                <li>Content transformation tools</li>
                <li>Media processing</li>
                <li>SEO automation</li>
            </ul>
        </div>
    </div>

    <h3>Getting Started with Automation</h3>
    <ol class="steps">
        <li>
            <strong>Identify repetitive tasks</strong>
            <p>
                Look for tasks you perform frequently that follow a predictable
                pattern.
            </p>
        </li>
        <li>
            <strong>Choose the right tools</strong>
            <p>
                Select automation tools that integrate well with your existing
                workflow.
            </p>
        </li>
        <li>
            <strong>Start small</strong>
            <p>
                Begin with simple automations and gradually tackle more complex
                processes.
            </p>
        </li>
        <li>
            <strong>Monitor and refine</strong>
            <p>
                Regularly evaluate your automations and improve them over time.
            </p>
        </li>
    </ol>

    <div class="featured-tool">
        <h3>Featured Automation Tool: GitHub Actions</h3>
        <p>
            GitHub Actions makes it easy to automate all your software
            workflows. Build, test, and deploy your code right from GitHub. Make
            code reviews, branch management, and issue triaging work the way you
            want.
        </p>
        <a href="https://github.com/features/actions" target="_blank"
            >Learn more about GitHub Actions â†’</a
        >
    </div>

    <h3>Latest Automation Articles</h3>
    {
        automatePosts.length > 0 ? (
            <ul class="post-list">
                {automatePosts.map((post) => (
                    <li class="post-item">
                        <a href={`/blog/${post.slug}`}>
                            <h4>{post.data.title}</h4>
                            <p class="post-date">
                                <FormattedDate date={post.data.pubDate} />
                            </p>
                            <p class="post-description">
                                {post.data.description}
                            </p>
                        </a>
                    </li>
                ))}
            </ul>
        ) : (
            <p>No automation articles yet. Check back soon!</p>
        )
    }
</ContentPage>

<style>
    .automation-types {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
        margin: 2rem 0;
    }

    .automation-type {
        background-color: var(--theme-card-bg);
        border-left: 4px solid var(--theme-accent);
        padding: 1.5rem;
        border-radius: 0 8px 8px 0;
        box-shadow: var(--box-shadow-small);
        transition: var(--theme-transition);
    }

    .automation-type:hover {
        transform: translateY(-2px);
        box-shadow: var(--box-shadow-hover);
    }

    .automation-type h3 {
        margin-top: 0.5rem;
        color: var(--theme-accent);
    }

    .steps {
        margin: 2rem 0;
        padding-left: 1rem;
    }

    .steps li {
        margin-bottom: 1.5rem;
    }

    .steps strong {
        display: block;
        margin-bottom: 0.25rem;
        color: var(--theme-accent);
    }

    .steps p {
        margin: 0;
    }

    .featured-tool {
        background-color: var(--theme-card-bg);
        border-radius: 8px;
        padding: 1.5rem;
        margin-top: 2rem;
        box-shadow: var(--box-shadow);
        border: 1px solid var(--theme-border);
        transition: var(--theme-transition);
    }

    .featured-tool h3 {
        margin-top: 0;
        color: var(--theme-accent);
    }

    .featured-tool a {
        display: inline-block;
        margin-top: 1rem;
        font-weight: 500;
        color: var(--theme-accent);
        text-decoration: none;
        transition: color 0.2s ease;
    }

    .featured-tool a:hover {
        color: var(--theme-accent-dark);
        text-decoration: underline;
    }

    .post-list {
        list-style-type: none;
        padding: 0;
        margin: 2rem 0;
    }

    .post-item {
        margin-bottom: 2rem;
        border-bottom: 1px solid var(--theme-border);
        padding-bottom: 1rem;
        transition: transform 0.2s ease;
    }

    .post-item:hover {
        transform: translateY(-2px);
    }

    .post-item a {
        text-decoration: none;
        color: inherit;
        display: block;
        padding: 1rem;
        border-radius: 8px;
        transition: box-shadow 0.3s ease;
    }

    .post-item a:hover {
        box-shadow: var(--box-shadow-small);
        background-color: var(--theme-selection-bg);
    }

    .post-item a:hover h4 {
        color: var(--theme-accent);
    }

    .post-date {
        font-size: 0.9rem;
        color: rgb(var(--gray));
        margin: 0.25rem 0;
    }

    .post-description {
        margin-top: 0.5rem;
    }
</style>
