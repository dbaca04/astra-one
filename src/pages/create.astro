---
import ContentPage from "../layouts/ContentPage.astro";
import { getCollection } from "astro:content";
import FormattedDate from "../components/FormattedDate.astro";
import type { CollectionEntry } from "astro:content";
import type { BlogSchema } from "../types";

// Get blog entries for the "create" section
const allPosts = await getCollection("blog");
// Type assertion for the schema
interface BlogPost extends CollectionEntry<"blog"> {
    data: BlogSchema;
    slug: string;
}
// Filter by section and cast
const createPosts = allPosts
    .filter((post) => {
        const data = post.data as BlogSchema;
        return data.section === "create";
    })
    .sort(
        (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
    ) as BlogPost[];
---

<ContentPage
    title="Create"
    description="Tools and resources to help you build your next digital creation."
>
    <h2>Creation Tools & Resources</h2>

    <p>
        This section is dedicated to helping you build and create amazing
        digital projects. Whether you're designing websites, crafting content,
        or building applications, we've assembled resources to support your
        creative journey.
    </p>

    <p>
        Explore tools, tutorials, and templates that will streamline your
        workflow and inspire your next creation.
    </p>

    <div class="creation-categories">
        <div class="category">
            <h3>Web Design</h3>
            <p>Resources for creating beautiful, functional websites</p>
            <ul>
                <li>Design principles</li>
                <li>UI/UX guidelines</li>
                <li>Template resources</li>
            </ul>
        </div>

        <div class="category">
            <h3>Content Creation</h3>
            <p>Tools for developing engaging content</p>
            <ul>
                <li>Writing assistance</li>
                <li>Media creation</li>
                <li>Editorial guides</li>
            </ul>
        </div>

        <div class="category">
            <h3>Development</h3>
            <p>Resources for building robust applications</p>
            <ul>
                <li>Framework guides</li>
                <li>Development environments</li>
                <li>Code generators</li>
            </ul>
        </div>
    </div>

    <p class="cta">
        Ready to start creating? Explore our resources above or <a
            href="/contact">contact us</a
        >
        if you need specialized guidance for your project.
    </p>

    <h3>Latest Creation Articles</h3>
    {
        createPosts.length > 0 ? (
            <ul class="post-list">
                {createPosts.map((post) => (
                    <li class="post-item">
                        <a href={`/blog/${post.slug}`}>
                            <h4>{post.data.title}</h4>
                            <p class="post-date">
                                <FormattedDate date={post.data.pubDate} />
                            </p>
                            <p class="post-description">
                                {post.data.description}
                            </p>
                        </a>
                    </li>
                ))}
            </ul>
        ) : (
            <p>No creation articles yet. Check back soon!</p>
        )
    }
</ContentPage>

<style>
    .creation-categories {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
        margin: 2rem 0;
    }

    .category {
        background-color: var(--theme-card-bg);
        border-radius: 8px;
        padding: 1.5rem;
        box-shadow: var(--box-shadow-small);
        border: 1px solid var(--theme-border);
        transition: var(--theme-transition);
    }

    .category:hover {
        transform: translateY(-4px);
        box-shadow: var(--box-shadow-hover);
    }

    .category h3 {
        margin-top: 0;
        color: var(--theme-accent);
    }

    .cta {
        text-align: center;
        margin-top: 2rem;
        font-weight: bold;
        padding: 1.5rem;
        background-color: var(--theme-card-bg);
        border-radius: 8px;
        box-shadow: var(--box-shadow);
        border: 1px solid var(--theme-border);
    }

    .cta a {
        color: var(--theme-accent);
        text-decoration: none;
    }

    .cta a:hover {
        text-decoration: underline;
        color: var(--theme-accent-dark);
    }

    .post-list {
        list-style-type: none;
        padding: 0;
        margin: 2rem 0;
    }

    .post-item {
        margin-bottom: 2rem;
        border-bottom: 1px solid var(--theme-border);
        padding-bottom: 1rem;
        transition: transform 0.2s ease;
    }

    .post-item:hover {
        transform: translateY(-2px);
    }

    .post-item a {
        text-decoration: none;
        color: inherit;
        display: block;
        padding: 1rem;
        border-radius: 8px;
        transition: box-shadow 0.3s ease;
    }

    .post-item a:hover {
        box-shadow: var(--box-shadow-small);
        background-color: var(--theme-selection-bg);
    }

    .post-item a:hover h4 {
        color: var(--theme-accent);
    }

    .post-date {
        font-size: 0.9rem;
        color: rgb(var(--gray));
        margin: 0.25rem 0;
    }

    .post-description {
        margin-top: 0.5rem;
    }
</style>
